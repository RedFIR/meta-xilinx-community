From 8dfeb68ef76b854c6499a0131c3c11dddc08419c Mon Sep 17 00:00:00 2001
From: Adrian Alonso <aalonso00@gmail.com>
Date: Thu, 7 Oct 2010 21:09:59 -0500
Subject: [PATCH] glibc: accept binutils 2.20.x and newer

* Fix configuration error trying to match binutilis 2.13
* configure: error:
*** These critical programs are missing or too old: as ld
*** Check the INSTALL file for required versions.

Signed-off-by: Adrian Alonso <aalonso00@gmail.com>
---
 configure    |    4 ++--
 configure.in |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/configure b/configure
index 495bb19..aa62cc7 100755
--- a/configure
+++ b/configure
@@ -3918,7 +3918,7 @@ echo $ECHO_N "checking version of $AS... $ECHO_C" >&6
   ac_prog_version=`$AS --version 2>&1 | sed -n 's/^.*GNU assembler.* \([0-9]*\.[0-9.]*\).*$/\1/p'`
   case $ac_prog_version in
     '') ac_prog_version="v. ?.??, bad"; ac_verc_fail=yes;;
-    2.1[3-9]*)
+    2.2[0-9]*)
        ac_prog_version="$ac_prog_version, ok"; ac_verc_fail=no;;
     *) ac_prog_version="$ac_prog_version, bad"; ac_verc_fail=yes;;
 
@@ -3979,7 +3979,7 @@ echo $ECHO_N "checking version of $LD... $ECHO_C" >&6
   ac_prog_version=`$LD --version 2>&1 | sed -n 's/^.*GNU ld.* \([0-9][0-9]*\.[0-9.]*\).*$/\1/p'`
   case $ac_prog_version in
     '') ac_prog_version="v. ?.??, bad"; ac_verc_fail=yes;;
-    2.1[3-9]*)
+    2.2[0-9]*)
        ac_prog_version="$ac_prog_version, ok"; ac_verc_fail=no;;
     *) ac_prog_version="$ac_prog_version, bad"; ac_verc_fail=yes;;
 
diff --git a/configure.in b/configure.in
index d1a8e80..299a565 100644
--- a/configure.in
+++ b/configure.in
@@ -734,10 +734,10 @@ AC_SUBST(MIG)dnl Needed by sysdeps/mach/configure.in
 # Accept binutils 2.13 or newer.
 AC_CHECK_PROG_VER(AS, $AS, --version,
 		  [GNU assembler.* \([0-9]*\.[0-9.]*\)],
-		  [2.1[3-9]*], AS=: critic_missing="$critic_missing as")
+		  [2.2[0-9]*], AS=: critic_missing="$critic_missing as")
 AC_CHECK_PROG_VER(LD, $LD, --version,
 		  [GNU ld.* \([0-9][0-9]*\.[0-9.]*\)],
-		  [2.1[3-9]*], LD=: critic_missing="$critic_missing ld")
+		  [2.2[0-9]*], LD=: critic_missing="$critic_missing ld")
 
 # We need the physical current working directory.  We cannot use the
 # "pwd -P" shell builtin since that's not portable.  Instead we try to
-- 
1.7.2.3

