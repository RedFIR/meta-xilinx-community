From b416616d5767a0547e917f8b5408199e08eda7e4 Mon Sep 17 00:00:00 2001
From: David Andrey <david.andrey@netmodule.com>
Date: Tue, 1 Jul 2014 09:44:51 +0200
Subject: [PATCH 5/7] xilinx_emacps: allow MTU of 1500

It is now possible to set an MTU of 1500.

Signed-off-by: Stefan Eichenberger <stefan.eichenberger@netmodule.com>
---
 drivers/net/ethernet/xilinx/xilinx_emacps.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/xilinx/xilinx_emacps.c b/drivers/net/ethernet/xilinx/xilinx_emacps.c
index aba7747..a08be55 100644
--- a/drivers/net/ethernet/xilinx/xilinx_emacps.c
+++ b/drivers/net/ethernet/xilinx/xilinx_emacps.c
@@ -2482,7 +2482,7 @@ static void xemacps_set_rx_mode(struct net_device *ndev)
 static int xemacps_change_mtu(struct net_device *ndev, int new_mtu)
 {
	if ((new_mtu < MIN_MTU) ||
-		((new_mtu + ndev->hard_header_len) > MAX_MTU))
+		(new_mtu > MAX_MTU))
		return -EINVAL;

	ndev->mtu = new_mtu;	/* change mtu in net_device structure */
--
1.7.10.4
