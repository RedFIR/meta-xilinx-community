From ee45201008c4214e6ed956d4e5a7bf157b3320c5 Mon Sep 17 00:00:00 2001
From: Stefan Eichenberger <stefan.eichenberger@netmodule.com>
Date: Wed, 13 Nov 2013 11:04:36 +0100
Subject: [PATCH 8/9] [xilinx_emacps] Changed change_mtu so that it is
 possible to set an MTU of 1500.

Signed-off-by: Stefan Eichenberger <stefan.eichenberger@netmodule.com>
---
 drivers/net/ethernet/xilinx/xilinx_emacps.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/xilinx/xilinx_emacps.c b/drivers/net/ethernet/xilinx/xilinx_emacps.c
index e66b87d..1e611ed 100644
--- a/drivers/net/ethernet/xilinx/xilinx_emacps.c
+++ b/drivers/net/ethernet/xilinx/xilinx_emacps.c
@@ -2295,7 +2295,7 @@ static void xemacps_set_rx_mode(struct net_device *ndev)
 static int xemacps_change_mtu(struct net_device *ndev, int new_mtu)
 {
	if ((new_mtu < MIN_MTU) ||
-		((new_mtu + ndev->hard_header_len) > MAX_MTU))
+		(new_mtu > MAX_MTU))
		return -EINVAL;

	ndev->mtu = new_mtu;	/* change mtu in net_device structure */
--
1.7.10.4
